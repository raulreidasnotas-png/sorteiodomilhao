<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Viva Sorte</title>
  <link href="css/style.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="css2" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="css/bootstrap-icons.min.css">

  <!-- SCRIPT UTMIFY UTMs -->
  <script
    src="https://cdn.utmify.com.br/scripts/utms/latest.js"
    data-utmify-prevent-xcod-sck
    data-utmify-prevent-subids
    async
    defer
  ></script>

  <!-- PIXEL UTMIFY -->
  <script>
    window.pixelId = "69012e55c442991f00824a8e";
    var a = document.createElement("script");
    a.setAttribute("async", "");
    a.setAttribute("defer", "");
    a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
    document.head.appendChild(a);
  </script>

  <script>
    // Redirecionamento ao voltar
    const link = '';
    function setBackRedirect(url) {
      let urlBackRedirect = url;
      urlBackRedirect = urlBackRedirect.trim() + (urlBackRedirect.indexOf('?') > 0 ? '&' : '?') + document.location.search.replace('?', '').toString();
      history.pushState({}, '', location.href);
      history.pushState({}, '', location.href);
      history.pushState({}, '', location.href);
      window.addEventListener('popstate', () => {
        setTimeout(() => {
          location.href = urlBackRedirect;
        }, 1);
      });
    }
    setBackRedirect(link);
  </script>
</head>
<body>
  <header class="white-header">
    <div class="logo">
      <img src="images/logoviva.png" alt="Logomarca" class="logoviva">
    </div>
    <button class="menu-button" id="menuButton">HOJE</button>
  </header>

  <div class="banner">
    <div class="container-banner">
      <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="tag-compre-agora"><span>Site Oficial</span></div>
            <img src="images/1m1.jpg" class="d-block w-100" alt="...">
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="sorteio-date w-100 text-center">
    <h1>Sorteio <span style="background-color: #f0ad4e;" id="contador">HOJE</span> por apenas <span style="background-color: #2f4eb5;">R$0,99</span></h1>
  </div>

  <div class="container-principal">
    <div class="cotas">
      <div class="cotas-one">
        <button type="button" class="cota" onclick="selecionarValor(20)">
          <div class="cota-qtd">+20</div>
          <h1>R$19,85</h1>
          <h2>SELECIONAR</h2>
        </button>
        <button type="button" class="cota" onclick="selecionarValor(30)">
          <div class="cota-qtd">+30</div>
          <h1>R$29,70</h1>
          <h2>SELECIONAR</h2>
        </button>
        <button type="button" class="cota" onclick="selecionarValor(40)">
          <div class="cota-qtd">+40</div>
          <h1>R$39,60</h1>
          <h2>SELECIONAR</h2>
        </button>
      </div>
      <div class="cotas-one">
        <button type="button" class="cota" onclick="selecionarValor(70)">
          <i class="bi bi-star-fill destaque"></i>
          <div class="cota-qtd">+70</div>
          <h1>R$69,30</h1>
          <h2>SELECIONAR</h2>
        </button>
        <button type="button" class="cota" onclick="selecionarValor(100)">
          <div class="cota-qtd">+100</div>
          <h1>R$99,00</h1>
          <h2>SELECIONAR</h2>
        </button>
        <button type="button" class="cota" onclick="selecionarValor(200)">
          <div class="cota-qtd">+200</div>
          <h1>R$199,00</h1>
          <h2>SELECIONAR</h2>
        </button>
      </div>
    </div>
  </div>

  <div class="container-principal">
    <div class="contador-cotas">
      <span><button type="button" class="btn-contador-cotas" onclick="decrementar()">-</button></span>
      <input type="number" id="numero" class="input-contador-cotas" value="0" min="0" oninput="highlightButton()">
      <span><button type="button" class="btn-contador-cotas" onclick="incrementar()">+</button></span>
    </div>
    <button type="button" id="btn-adicionar-carrinho" class="adc-carrinho" onclick="adicionarAoCarrinho()" disabled>
      <i class="bi bi-cart-fill"></i> COMPRAR TÍTULOS
    </button>

    <div class="sorteio-date w-100 text-center" style="margin-top: 5px;">
      <br>
      <h1 style="font-size: 0.72rem;">Comprar mais títulos aumenta suas chances de ganhar!</h1>

      <div class="container-principal">
        <div class="hospital">
          <div class="card-hospital">
            <div class="card-hospital-image">
              <img src="images/logo-hospital.svg">
              <h2>Instituição beneficiada</h2>
            </div>
            <div class="card-hospital-text">
              <p>O Hospital do Câncer de Londrina foi fundado em 1965 com o objetivo de melhorar o tratamento do câncer e a qualidade de vida dos pacientes. Sempre em busca de excelência científica e tecnológica.</p>
            </div>
          </div>

          <div class="card-hospital card-hospital-bg-azul">
            <div class="card-hospital-image">
              <img src="images/viva-hosp.svg">
              <h2>Viva Privilégios</h2>
            </div>
            <div class="card-hospital-text">
              <p>Com cada compra, acumule pontos para trocar por consultas médicas, cashback e benefícios em apps de transporte, alimentação e muito mais!</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <link href="css/rodape.css" rel="stylesheet">
  <div class="rodape">
    <div class="container-principal">
      <img class="logo-rodape" src="images/logoviva.png">
      <div class="redes">
        <i class="bi bi-instagram"></i>
        <i class="bi bi-facebook"></i>
        <i class="bi bi-twitter"></i>
        <i class="bi bi-youtube"></i>
      </div>
      <h1>Sorteios lastreados por Títulos de Capitalização, da Modalidade Incentivo, emitidos pela VIA Capitalização S.A. CNPJ: 88.076.302/0001-94.</h1>
      <div class="linha-rodape"></div>
      <div class="patterns-rodape">
        <div class="pattern-rodape">
          Títulos emitidos por: <img src="images/viacap.png">
        </div>
        <div class="pattern-rodape">
          Promoção realizada por: <img src="images/viva.png">
        </div>
        <div class="pattern-rodape">
          Desenvolvimento: <img src="images/edjdigital.png">
        </div>
      </div>
    </div>
  </div>

  <script src="js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <script>
    const precoPorUnidade = 0.99;

    function incrementar() {
      const input = document.getElementById('numero');
      const valorAtual = parseInt(input.value);
      const steps = [0, 20, 30, 40, 70, 100, 200];
      const index = steps.indexOf(valorAtual);
      if (index < steps.length - 1) input.value = steps[index + 1];
      highlightButton();
    }

    function decrementar() {
      const input = document.getElementById('numero');
      const valorAtual = parseInt(input.value);
      const steps = [0, 20, 30, 40, 70, 100, 200];
      const index = steps.indexOf(valorAtual);
      if (index > 0) input.value = steps[index - 1];
      highlightButton();
    }

    function highlightButton() {
      const valor = parseInt(document.getElementById('numero').value);
      const botoes = document.querySelectorAll('.cota');
      const botao = document.getElementById('btn-adicionar-carrinho');
      botoes.forEach(b => b.classList.remove('cota-selected'));

     let link = "";
      switch (valor) {
        case 20: link = "https://pay.spedpay.online/nocWXRdd"; break;
        case 30: link = "https://pay.spedpay.online/nyYEZNjk"; break;
        case 40: link = "https://pay.spedpay.online/XcZrKopG"; break;
        case 70: link = "https://pay.spedpay.online/ArLfskBe"; break;
        case 100: link = "https://pay.spedpay.online/ipANLDJe"; break;
        case 200: link = "https://pay.spedpay.online/LQAHmGsM"; break;
      }

      if (valor > 0 && link) {
        botao.disabled = false;
        botao.setAttribute("onclick", adicionarAoCarrinho('${link}'));
      } else {
        botao.disabled = true;
      }
    }

    function selecionarValor(valor) {
      document.getElementById('numero').value = valor;
      highlightButton();
    }

    function adicionarAoCarrinho(link) {
      window.location.href = link + window.location.search;
    }
  </script>

  <div class="popup" id="popup"></div>
  <audio id="notifySound" preload="auto">
    <source src="media/beep-07.wav" type="audio/wav">
  </audio>

  <script>
    const mensagens = [
      "João P. acabou de Ganhar 50mil!",
      "Larissa F. acabou de Ganhar um iPhone 16 Pro!",
      "Diego S. acabou de comprar 70 cotas!",
      "Juliana M. acabou de comprar 100 cotas!",
      "Bruno T. acabou de comprar 200 cotas!",
      "Carla R. acabou de comprar 70 cotas!"
    ];
    const popup = document.getElementById('popup');
    const notifySound = document.getElementById('notifySound');
    let index = 0;

    function mostrarPopup() {
      if (index >= mensagens.length) return;
      popup.innerText = mensagens[index];
      popup.style.display = 'block';
      notifySound.play();
      setTimeout(() => {
        popup.style.display = 'none';
        index++;
        setTimeout(mostrarPopup, 5000);
      }, 4000);
    }

    window.onload = () => setTimeout(mostrarPopup, 1000);
  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
    }
    .popup {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background-color: #d4edda;
      border-left: 6px solid #28a745;
      color: #155724;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      display: none;
      animation: fadeIn 0.5s ease-in-out;
      z-index: 9999;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</body>
</html>
